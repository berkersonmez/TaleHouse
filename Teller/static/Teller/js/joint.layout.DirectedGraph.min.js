!function e(r,n,t){function o(a,d){if(!n[a]){if(!r[a]){var u="function"==typeof require&&require;if(!d&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=n[a]={exports:{}};r[a][0].call(s.exports,function(e){var n=r[a][1][e];return o(n?n:e)},s,s.exports,e,r,n,t)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};r.dagre=e("./index")},{"./index":2}],2:[function(e,r,n){n.Digraph=e("graphlib").Digraph,n.Graph=e("graphlib").Graph,n.layout=e("./lib/layout"),n.version=e("./lib/version")},{"./lib/layout":3,"./lib/version":18,graphlib:24}],3:[function(e,r){var n=e("./util"),t=e("./rank"),o=e("./order"),i=e("graphlib").CGraph,a=e("graphlib").CDigraph;r.exports=function(){function r(e){var r=new a;e.eachNode(function(e,n){void 0===n&&(n={}),r.addNode(e,{width:n.width,height:n.height}),n.hasOwnProperty("rank")&&(r.node(e).prefRank=n.rank)}),e.parent&&e.nodes().forEach(function(n){r.parent(n,e.parent(n))}),e.eachEdge(function(e,n,t,o){void 0===o&&(o={});var i={e:e,minLen:o.minLen||1,width:o.width||0,height:o.height||0,points:[]};r.addEdge(null,n,t,i)});var n=e.graph()||{};return r.graph({rankDir:n.rankDir||p.rankDir,orderRestarts:n.orderRestarts}),r}function d(e){var i,a=g.rankSep();try{return i=n.time("initLayoutGraph",r)(e),0===i.order()?i:(i.eachEdge(function(e,r,n,t){t.minLen*=2}),g.rankSep(a/2),n.time("rank.run",t.run)(i,p.rankSimplex),n.time("normalize",u)(i),n.time("order",o)(i,p.orderMaxSweeps),n.time("position",l.run)(i),n.time("undoNormalize",s)(i),n.time("fixupEdgePoints",c)(i),n.time("rank.restoreEdges",t.restoreEdges)(i),n.time("createFinalGraph",h)(i,e.isDirected()))}finally{g.rankSep(a)}}function u(e){var r=0;e.eachEdge(function(n,t,o,i){var a=e.node(t).rank,d=e.node(o).rank;if(d>a+1){for(var u=t,s=a+1,c=0;d>s;++s,++c){var h="_D"+ ++r,f={width:i.width,height:i.height,edge:{id:n,source:t,target:o,attrs:i},rank:s,dummy:!0};0===c?f.index=0:s+1===d&&(f.index=1),e.addNode(h,f),e.addEdge(null,u,h,{}),u=h}e.addEdge(null,u,o,{}),e.delEdge(n)}})}function s(e){e.eachNode(function(r,n){if(n.dummy){if("index"in n){var t=n.edge;e.hasEdge(t.id)||e.addEdge(t.id,t.source,t.target,t.attrs);var o=e.edge(t.id).points;o[n.index]={x:n.x,y:n.y,ul:n.ul,ur:n.ur,dl:n.dl,dr:n.dr}}e.delNode(r)}})}function c(e){e.eachEdge(function(e,r,n,t){t.reversed&&t.points.reverse()})}function h(e,r){var n=r?new a:new i;n.graph(e.graph()),e.eachNode(function(e,r){n.addNode(e,r)}),e.eachNode(function(r){n.parent(r,e.parent(r))}),e.eachEdge(function(e,r,t,o){n.addEdge(o.e,r,t,o)});var t=0,o=0;return e.eachNode(function(r,n){e.children(r).length||(t=Math.max(t,n.x+n.width/2),o=Math.max(o,n.y+n.height/2))}),e.eachEdge(function(e,r,n,i){var a=Math.max.apply(Math,i.points.map(function(e){return e.x})),d=Math.max.apply(Math,i.points.map(function(e){return e.y}));t=Math.max(t,a+i.width/2),o=Math.max(o,d+i.height/2)}),n.graph().width=t,n.graph().height=o,n}function f(e){return function(){return arguments.length?(e.apply(null,arguments),g):e()}}var p={debugLevel:0,orderMaxSweeps:o.DEFAULT_MAX_SWEEPS,rankSimplex:!1,rankDir:"TB"},l=e("./position")(),g={};return g.orderIters=n.propertyAccessor(g,p,"orderMaxSweeps"),g.rankSimplex=n.propertyAccessor(g,p,"rankSimplex"),g.nodeSep=f(l.nodeSep),g.edgeSep=f(l.edgeSep),g.universalSep=f(l.universalSep),g.rankSep=f(l.rankSep),g.rankDir=n.propertyAccessor(g,p,"rankDir"),g.debugAlignment=f(l.debugAlignment),g.debugLevel=n.propertyAccessor(g,p,"debugLevel",function(e){n.log.level=e,l.debugLevel(e)}),g.run=n.time("Total layout",d),g._normalize=u,g}},{"./order":4,"./position":9,"./rank":10,"./util":17,graphlib:24}],4:[function(e,r){function n(e,r){function n(){e.eachNode(function(e,r){p[e]=r.order})}arguments.length<2&&(r=l);var t=e.graph().orderRestarts||0,o=h(e);o.forEach(function(r){r=r.filterNodes(function(r){return!e.children(r).length})});for(var i,d=0,u=Number.MAX_VALUE,p={},g=0;g<Number(t)+1&&0!==u;++g){i=Number.MAX_VALUE,f(e,t>0),s.log(2,"Order phase start cross count: "+e.graph().orderInitCC);var v,y,E;for(v=0,y=0;4>y&&r>v&&i>0;++v,++y,++d)a(e,o,v),E=c(e),i>E&&(y=0,i=E,u>E&&(n(),u=E)),s.log(3,"Order phase start "+g+" iter "+v+" cross count: "+E)}Object.keys(p).forEach(function(r){e.children&&e.children(r).length||(e.node(r).order=p[r])}),e.graph().orderCC=u,s.log(2,"Order iterations: "+d),s.log(2,"Order phase best cross count: "+e.graph().orderCC)}function t(e,r){var n={};return r.forEach(function(r){n[r]=e.inEdges(r).map(function(r){return e.node(e.source(r)).order})}),n}function o(e,r){var n={};return r.forEach(function(r){n[r]=e.outEdges(r).map(function(r){return e.node(e.target(r)).order})}),n}function a(e,r,n){n%2===0?d(e,r,n):u(e,r,n)}function d(e,r){var n;for(i=1;i<r.length;++i)n=p(r[i],n,t(e,r[i].nodes()))}function u(e,r){var n;for(i=r.length-2;i>=0;--i)p(r[i],n,o(e,r[i].nodes()))}var s=e("./util"),c=e("./order/crossCount"),h=e("./order/initLayerGraphs"),f=e("./order/initOrder"),p=e("./order/sortLayer");r.exports=n;var l=24;n.DEFAULT_MAX_SWEEPS=l},{"./order/crossCount":5,"./order/initLayerGraphs":6,"./order/initOrder":7,"./order/sortLayer":8,"./util":17}],5:[function(e,r){function n(e){for(var r=0,n=o.ordering(e),i=1;i<n.length;++i)r+=t(e,n[i-1],n[i]);return r}function t(e,r,n){var t=[];r.forEach(function(r){var n=[];e.outEdges(r).forEach(function(r){n.push(e.node(e.target(r)).order)}),n.sort(function(e,r){return e-r}),t=t.concat(n)});for(var o=1;o<n.length;)o<<=1;var i=2*o-1;o-=1;for(var a=[],d=0;i>d;++d)a[d]=0;var u=0;return t.forEach(function(e){var r=e+o;for(++a[r];r>0;)r%2&&(u+=a[r+1]),r=r-1>>1,++a[r]}),u}var o=e("../util");r.exports=n},{"../util":17}],6:[function(e,r){function n(e){function r(t){if(null===t)return void e.children(t).forEach(function(e){r(e)});var i=e.node(t);i.minRank="rank"in i?i.rank:Number.MAX_VALUE,i.maxRank="rank"in i?i.rank:Number.MIN_VALUE;var a=new o;return e.children(t).forEach(function(n){var t=r(n);a=o.union([a,t]),i.minRank=Math.min(i.minRank,e.node(n).minRank),i.maxRank=Math.max(i.maxRank,e.node(n).maxRank)}),"rank"in i&&a.add(i.rank),a.keys().forEach(function(e){e in n||(n[e]=[]),n[e].push(t)}),a}var n=[];r(null);var i=[];return n.forEach(function(r,n){i[n]=e.filterNodes(t(r))}),i}var t=e("graphlib").filter.nodesFromList,o=e("cp-data").Set;r.exports=n},{"cp-data":19,graphlib:24}],7:[function(e,r){function n(e,r){var n=[];e.eachNode(function(r,t){var o=n[t.rank];e.children&&e.children(r).length>0||(o||(o=n[t.rank]=[]),o.push(r))}),n.forEach(function(n){r&&o.shuffle(n),n.forEach(function(r,n){e.node(r).order=n})});var i=t(e);e.graph().orderInitCC=i,e.graph().orderCC=Number.MAX_VALUE}var t=e("./crossCount"),o=e("../util");r.exports=n},{"../util":17,"./crossCount":5}],8:[function(e,r){function n(e,r,n){var o=[],i={};e.eachNode(function(e,r){o[r.order]=e;var a=n[e];a.length&&(i[e]=t.sum(a)/a.length)});var a=e.nodes().filter(function(e){return void 0!==i[e]});a.sort(function(r,n){return i[r]-i[n]||e.node(r).order-e.node(n).order});for(var d=0,u=0,s=a.length;s>u;++d)void 0!==i[o[d]]&&(e.node(a[u++]).order=d)}var t=e("../util");r.exports=n},{"../util":17}],9:[function(e,r){var n=e("./util");r.exports=function(){function e(e){e=e.filterNodes(n.filterNonSubgraphs(e));var r=n.ordering(e),a=t(e,r),d={};["u","d"].forEach(function(n){"d"===n&&r.reverse(),["l","r"].forEach(function(t){"r"===t&&c(r);var u=n+t,h=o(e,r,a,"u"===n?"predecessors":"successors");d[u]=i(e,r,h.pos,h.root,h.align),E.debugLevel>=3&&y(n+t,e,r,d[u]),"r"===t&&s(d[u]),"r"===t&&c(r)}),"d"===n&&r.reverse()}),u(e,r,d),e.eachNode(function(r){var n=[];for(var t in d){var o=d[t][r];g(t,e,r,o),n.push(o)}n.sort(function(e,r){return e-r}),l(e,r,(n[1]+n[2])/2)});var p=0,m="BT"===e.graph().rankDir||"RL"===e.graph().rankDir;r.forEach(function(r){var t=n.max(r.map(function(r){return f(e,r)}));p+=t/2,r.forEach(function(r){v(e,r,m?-p:p)}),p+=t/2+E.rankSep});var k=n.min(e.nodes().map(function(r){return l(e,r)-h(e,r)/2})),_=n.min(e.nodes().map(function(r){return v(e,r)-f(e,r)/2}));e.eachNode(function(r){l(e,r,l(e,r)-k),v(e,r,v(e,r)-_)})}function r(e,r){return r>e?e.toString().length+":"+e+"-"+r:r.toString().length+":"+r+"-"+e}function t(e,n){function t(e){var n=c[e];(a>n||n>u)&&(s[r(i[d],e)]=!0)}var o,i,a,d,u,s={},c={};if(n.length<=2)return s;n[1].forEach(function(e,r){c[e]=r});for(var h=1;h<n.length-1;++h){o=n[h],i=n[h+1],a=0,d=0;for(var f=0;f<i.length;++f){var p=i[f];if(c[p]=f,u=void 0,e.node(p).dummy){var l=e.predecessors(p)[0];void 0!==l&&e.node(l).dummy&&(u=c[l])}if(void 0===u&&f===i.length-1&&(u=o.length-1),void 0!==u){for(;f>=d;++d)e.predecessors(i[d]).forEach(t);a=u}}}return s}function o(e,n,t,o){var i={},a={},d={};return n.forEach(function(e){e.forEach(function(e,r){a[e]=e,d[e]=e,i[e]=r})}),n.forEach(function(n){var u=-1;n.forEach(function(n){var s,c=e[o](n);c.length>0&&(c.sort(function(e,r){return i[e]-i[r]}),s=(c.length-1)/2,c.slice(Math.floor(s),Math.ceil(s)+1).forEach(function(e){d[n]===n&&!t[r(e,n)]&&u<i[e]&&(d[e]=n,d[n]=a[n]=a[e],u=i[e])}))})}),{pos:i,root:a,align:d}}function i(e,r,t,o,i){function a(e,r,n){s[e][r]=r in s[e]?Math.min(s[e][r],n):n}function d(r){if(!(r in f)){f[r]=0;var n=r;do{if(t[n]>0){var s=o[h[n]];d(s),u[r]===r&&(u[r]=u[s]);var c=p(e,h[n])+p(e,n);u[r]!==u[s]?a(u[s],u[r],f[r]-f[s]-c):f[r]=Math.max(f[r],f[s]+c)}n=i[n]}while(n!==r)}}var u={},s={},c={},h={},f={};return r.forEach(function(e){e.forEach(function(r,n){u[r]=r,s[r]={},n>0&&(h[r]=e[n-1])})}),n.values(o).forEach(function(e){d(e)}),r.forEach(function(e){e.forEach(function(e){if(f[e]=f[o[e]],e===o[e]&&e===u[e]){var r=0;e in s&&Object.keys(s[e]).length>0&&(r=n.min(Object.keys(s[e]).map(function(r){return s[e][r]+(r in c?c[r]:0)}))),c[e]=r}})}),r.forEach(function(e){e.forEach(function(e){f[e]+=c[u[o[e]]]||0})}),f}function a(e,r,t){return n.min(r.map(function(e){var r=e[0];return t[r]}))}function d(e,r,t){return n.max(r.map(function(e){var r=e[e.length-1];return t[r]}))}function u(e,r,n){function t(e){n[h][e]+=s[h]}var o,i={},u={},s={},c=Number.POSITIVE_INFINITY;for(var h in n){var f=n[h];i[h]=a(e,r,f),u[h]=d(e,r,f);var p=u[h]-i[h];c>p&&(c=p,o=h)}["u","d"].forEach(function(e){["l","r"].forEach(function(r){var n=e+r;s[n]="l"===r?i[o]-i[n]:u[o]-u[n]})});for(h in n)e.eachNode(t)}function s(e){for(var r in e)e[r]=-e[r]}function c(e){e.forEach(function(e){e.reverse()})}function h(e,r){switch(e.graph().rankDir){case"LR":return e.node(r).height;case"RL":return e.node(r).height;default:return e.node(r).width}}function f(e,r){switch(e.graph().rankDir){case"LR":return e.node(r).width;case"RL":return e.node(r).width;default:return e.node(r).height}}function p(e,r){if(null!==E.universalSep)return E.universalSep;var n=h(e,r),t=e.node(r).dummy?E.edgeSep:E.nodeSep;return(n+t)/2}function l(e,r,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(r).y;e.node(r).y=n}else{if(arguments.length<3)return e.node(r).x;e.node(r).x=n}}function g(e,r,n,t){if("LR"===r.graph().rankDir||"RL"===r.graph().rankDir){if(arguments.length<3)return r.node(n)[e];r.node(n)[e]=t}else{if(arguments.length<3)return r.node(n)[e];r.node(n)[e]=t}}function v(e,r,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(r).x;e.node(r).x=n}else{if(arguments.length<3)return e.node(r).y;e.node(r).y=n}}function y(e,r,n,t){n.forEach(function(n,o){var i,a;n.forEach(function(n){var d=t[n];if(i){var u=p(r,i)+p(r,n);u>d-a&&console.log("Position phase: sep violation. Align: "+e+". Layer: "+o+". U: "+i+" V: "+n+". Actual sep: "+(d-a)+" Expected sep: "+u)}i=n,a=d})})}var E={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30},m={};return m.nodeSep=n.propertyAccessor(m,E,"nodeSep"),m.edgeSep=n.propertyAccessor(m,E,"edgeSep"),m.universalSep=n.propertyAccessor(m,E,"universalSep"),m.rankSep=n.propertyAccessor(m,E,"rankSep"),m.debugLevel=n.propertyAccessor(m,E,"debugLevel"),m.run=e,m}},{"./util":17}],10:[function(e,r,n){function t(e,r){i(e),h.time("constraints.apply",g.apply)(e),a(e),h.time("acyclic",f)(e);var n=e.filterNodes(h.filterNonSubgraphs(e));p(n),y(n).forEach(function(e){var t=n.filterNodes(E.nodesFromList(e));s(t,r)}),h.time("constraints.relax",g.relax(e)),h.time("reorientEdges",u)(e)}function o(e){f.undo(e)}function i(e){e.eachEdge(function(r,n,t,o){if(n===t){var i=d(e,r,n,t,o,0,!1),a=d(e,r,n,t,o,1,!0),u=d(e,r,n,t,o,2,!1);e.addEdge(null,i,n,{minLen:1,selfLoop:!0}),e.addEdge(null,i,a,{minLen:1,selfLoop:!0}),e.addEdge(null,n,u,{minLen:1,selfLoop:!0}),e.addEdge(null,a,u,{minLen:1,selfLoop:!0}),e.delEdge(r)}})}function a(e){e.eachEdge(function(r,n,t,o){if(n===t){var i=o.originalEdge,a=d(e,i.e,i.u,i.v,i.value,0,!0);e.addEdge(null,n,a,{minLen:1}),e.addEdge(null,a,t,{minLen:1}),e.delEdge(r)}})}function d(e,r,n,t,o,i,a){return e.addNode(null,{width:a?o.width:0,height:a?o.height:0,edge:{id:r,source:n,target:t,attrs:o},dummy:!0,index:i})}function u(e){e.eachEdge(function(r,n,t,o){e.node(n).rank>e.node(t).rank&&(e.delEdge(r),o.reversed=!0,e.addEdge(r,t,n,o))})}function s(e,r){var n=l(e);r&&(h.log(1,"Using network simplex for ranking"),v(e,n)),c(e)}function c(e){var r=h.min(e.nodes().map(function(r){return e.node(r).rank}));e.eachNode(function(e,n){n.rank-=r})}var h=e("./util"),f=e("./rank/acyclic"),p=e("./rank/initRank"),l=e("./rank/feasibleTree"),g=e("./rank/constraints"),v=e("./rank/simplex"),y=e("graphlib").alg.components,E=e("graphlib").filter;n.run=t,n.restoreEdges=o},{"./rank/acyclic":11,"./rank/constraints":12,"./rank/feasibleTree":13,"./rank/initRank":14,"./rank/simplex":16,"./util":17,graphlib:24}],11:[function(e,r){function n(e){function r(o){o in t||(t[o]=n[o]=!0,e.outEdges(o).forEach(function(t){var a,d=e.target(t);o===d?console.error('Warning: found self loop "'+t+'" for node "'+o+'"'):d in n?(a=e.edge(t),e.delEdge(t),a.reversed=!0,++i,e.addEdge(t,d,o,a)):r(d)}),delete n[o])}var n={},t={},i=0;return e.eachNode(function(e){r(e)}),o.log(2,"Acyclic Phase: reversed "+i+" edge(s)"),i}function t(e){e.eachEdge(function(r,n,t,o){o.reversed&&(delete o.reversed,e.delEdge(r),e.addEdge(r,t,n,o))})}var o=e("../util");r.exports=n,r.exports.undo=t},{"../util":17}],12:[function(e,r,n){function t(e){return"min"!==e&&"max"!==e&&0!==e.indexOf("same_")?(console.error("Unsupported rank type: "+e),!1):!0}function o(e,r,n,t){e.inEdges(r).forEach(function(r){var o,i=e.edge(r);o=i.originalEdge?i:{originalEdge:{e:r,u:e.source(r),v:e.target(r),value:i},minLen:e.edge(r).minLen},i.selfLoop&&(t=!1),t?(e.addEdge(null,n,e.source(r),o),o.reversed=!0):e.addEdge(null,e.source(r),n,o)})}function i(e,r,n,t){e.outEdges(r).forEach(function(r){var o,i=e.edge(r);o=i.originalEdge?i:{originalEdge:{e:r,u:e.source(r),v:e.target(r),value:i},minLen:e.edge(r).minLen},i.selfLoop&&(t=!1),t?(e.addEdge(null,e.target(r),n,o),o.reversed=!0):e.addEdge(null,n,e.target(r),o)})}function a(e,r,n){void 0!==n&&e.children(r).forEach(function(r){r===n||e.outEdges(n,r).length||e.node(r).dummy||e.addEdge(null,n,r,{minLen:0})})}function d(e,r,n){void 0!==n&&e.children(r).forEach(function(r){r===n||e.outEdges(r,n).length||e.node(r).dummy||e.addEdge(null,r,n,{minLen:0})})}n.apply=function(e){function r(n){var u={};e.children(n).forEach(function(a){if(e.children(a).length)return void r(a);var d=e.node(a),s=d.prefRank;if(void 0!==s){if(!t(s))return;s in u?u.prefRank.push(a):u.prefRank=[a];var c=u[s];void 0===c&&(c=u[s]=e.addNode(null,{originalNodes:[]}),e.parent(c,n)),o(e,a,c,"min"===s),i(e,a,c,"max"===s),e.node(c).originalNodes.push({u:a,value:d,parent:n}),e.delNode(a)}}),a(e,n,u.min),d(e,n,u.max)}r(null)},n.relax=function(e){var r=[];e.eachEdge(function(e,n,t,o){var i=o.originalEdge;i&&r.push(i)}),e.eachNode(function(r,n){var t=n.originalNodes;t&&(t.forEach(function(r){r.value.rank=n.rank,e.addNode(r.u,r.value),e.parent(r.u,r.parent)}),e.delNode(r))}),r.forEach(function(r){e.addEdge(r.e,r.u,r.v,r.value)})}},{}],13:[function(e,r){function n(e){function r(n){var o=!0;return e.predecessors(n).forEach(function(i){a.has(i)&&!t(e,i,n)&&(a.has(n)&&(d.addNode(n,{}),a.remove(n),d.graph({root:n})),d.addNode(i,{}),d.addEdge(null,i,n,{reversed:!0}),a.remove(i),r(i),o=!1)}),e.successors(n).forEach(function(i){a.has(i)&&!t(e,n,i)&&(a.has(n)&&(d.addNode(n,{}),a.remove(n),d.graph({root:n})),d.addNode(i,{}),d.addEdge(null,n,i,{}),a.remove(i),r(i),o=!1)}),o}function n(){var r=Number.MAX_VALUE;a.keys().forEach(function(n){e.predecessors(n).forEach(function(o){if(!a.has(o)){var i=t(e,o,n);Math.abs(i)<Math.abs(r)&&(r=-i)}}),e.successors(n).forEach(function(o){if(!a.has(o)){var i=t(e,n,o);Math.abs(i)<Math.abs(r)&&(r=i)}})}),d.eachNode(function(n){e.node(n).rank-=r})}var a=new o(e.nodes()),d=new i;if(1===a.size()){var u=e.nodes()[0];return d.addNode(u,{}),d.graph({root:u}),d}for(;a.size();){for(var s=d.order()?d.nodes():a.keys(),c=0,h=s.length;h>c&&r(s[c]);++c);a.size()&&n()}return d}function t(e,r,n){var t=e.node(n).rank-e.node(r).rank,o=a.max(e.outEdges(r,n).map(function(r){return e.edge(r).minLen}));return t-o}var o=e("cp-data").Set,i=e("graphlib").Digraph,a=e("../util");r.exports=n},{"../util":17,"cp-data":19,graphlib:24}],14:[function(e,r){function n(e){var r=o(e);r.forEach(function(r){var n=e.inEdges(r);if(0===n.length)return void(e.node(r).rank=0);var o=n.map(function(r){return e.node(e.source(r)).rank+e.edge(r).minLen});e.node(r).rank=t.max(o)})}var t=e("../util"),o=e("graphlib").alg.topsort;r.exports=n},{"../util":17,graphlib:24}],15:[function(e,r){function n(e,r,n,t){return Math.abs(e.node(r).rank-e.node(n).rank)-t}r.exports={slack:n}},{}],16:[function(e,r){function n(e,r){for(t(e,r);;){var n=d(r);if(null===n)break;var o=u(e,r,n);s(e,r,n,o)}}function t(e,r){function n(t){var o=r.successors(t);for(var a in o){var d=o[a];n(d)}t!==r.graph().root&&i(e,r,t)}o(r),r.eachEdge(function(e,r,n,t){t.cutValue=0}),n(r.graph().root)}function o(e){function r(t){var o=e.successors(t),i=n;for(var a in o){var d=o[a];r(d),i=Math.min(i,e.node(d).low)}e.node(t).low=i,e.node(t).lim=n++}var n=0;r(e.graph().root)}function i(e,r,n){var t=r.inEdges(n)[0],o=[],i=r.outEdges(n);for(var d in i)o.push(r.target(i[d]));var u,s=0,c=0,h=0,f=0,p=0,l=e.outEdges(n);for(var g in l){var v=e.target(l[g]);for(u in o)a(r,v,o[u])&&c++;a(r,v,n)||f++}var y=e.inEdges(n);for(var E in y){var m=e.source(y[E]);for(u in o)a(r,m,o[u])&&h++;a(r,m,n)||p++}var k=0;for(u in o){var _=r.edge(i[u]).cutValue;r.edge(i[u]).reversed?k-=_:k+=_}r.edge(t).reversed?s-=k-c+h-f+p:s+=k-c+h-f+p,r.edge(t).cutValue=s}function a(e,r,n){return e.node(n).low<=e.node(r).lim&&e.node(r).lim<=e.node(n).lim}function d(e){var r=e.edges();for(var n in r){var t=r[n],o=e.edge(t);if(o.cutValue<0)return t}return null}function u(e,r,n){var t,o=r.source(n),i=r.target(n),d=r.node(i).lim<r.node(o).lim?i:o,u=!r.edge(n).reversed,s=Number.POSITIVE_INFINITY;if(e.eachEdge(u?function(o,i,u,c){if(o!==n&&a(r,i,d)&&!a(r,u,d)){var h=p.slack(e,i,u,c.minLen);s>h&&(s=h,t=o)}}:function(o,i,u,c){if(o!==n&&!a(r,i,d)&&a(r,u,d)){var h=p.slack(e,i,u,c.minLen);s>h&&(s=h,t=o)}}),void 0===t){var c=[],h=[];throw e.eachNode(function(e){a(r,e,d)?h.push(e):c.push(e)}),new Error("No edge found from outside of tree to inside")}return t}function s(e,r,n,o){function i(e){var n=r.inEdges(e);for(var t in n){var o=n[t],a=r.source(o),d=r.edge(o);i(a),r.delEdge(o),d.reversed=!d.reversed,r.addEdge(o,e,a,d)}}r.delEdge(n);var a=e.source(o),d=e.target(o);i(d);for(var u=a,s=r.inEdges(u);s.length>0;)u=r.source(s[0]),s=r.inEdges(u);r.graph().root=u,r.addEdge(null,a,d,{cutValue:0}),t(e,r),c(e,r)}function c(e,r){function n(t){var o=r.successors(t);o.forEach(function(r){var o=h(e,t,r);e.node(r).rank=e.node(t).rank+o,n(r)})}n(r.graph().root)}function h(e,r,n){var t=e.outEdges(r,n);if(t.length>0)return f.max(t.map(function(r){return e.edge(r).minLen}));var o=e.inEdges(r,n);return o.length>0?-f.max(o.map(function(r){return e.edge(r).minLen})):void 0}var f=e("../util"),p=e("./rankUtil");r.exports=n},{"../util":17,"./rankUtil":15}],17:[function(e,r,n){function t(e,r){return function(){var n=(new Date).getTime();try{return r.apply(null,arguments)}finally{o(1,e+" time: "+((new Date).getTime()-n)+"ms")}}}function o(e){o.level>=e&&console.log.apply(console,Array.prototype.slice.call(arguments,1))}n.min=function(e){return Math.min.apply(Math,e)},n.max=function(e){return Math.max.apply(Math,e)},n.all=function(e,r){for(var n=0;n<e.length;++n)if(!r(e[n]))return!1;return!0},n.sum=function(e){return e.reduce(function(e,r){return e+r},0)},n.values=function(e){return Object.keys(e).map(function(r){return e[r]})},n.shuffle=function(e){for(i=e.length-1;i>0;--i){var r=Math.floor(Math.random()*(i+1)),n=e[r];e[r]=e[i],e[i]=n}},n.propertyAccessor=function(e,r,n,t){return function(o){return arguments.length?(r[n]=o,t&&t(o),e):r[n]}},n.ordering=function(e){var r=[];return e.eachNode(function(e,n){var t=r[n.rank]||(r[n.rank]=[]);t[n.order]=e}),r},n.filterNonSubgraphs=function(e){return function(r){return 0===e.children(r).length}},t.enabled=!1,n.time=t,o.level=0,n.log=o},{}],18:[function(e,r){r.exports="0.4.5"},{}],19:[function(e,r,n){n.Set=e("./lib/Set"),n.PriorityQueue=e("./lib/PriorityQueue"),n.version=e("./lib/version")},{"./lib/PriorityQueue":20,"./lib/Set":21,"./lib/version":23}],20:[function(e,r){function n(){this._arr=[],this._keyIndices={}}r.exports=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(e){return e.key})},n.prototype.has=function(e){return e in this._keyIndices},n.prototype.priority=function(e){var r=this._keyIndices[e];return void 0!==r?this._arr[r].priority:void 0},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(e,r){var n=this._keyIndices;if(!(e in n)){var t=this._arr,o=t.length;return n[e]=o,t.push({key:e,priority:r}),this._decrease(o),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},n.prototype.decrease=function(e,r){var n=this._keyIndices[e];if(r>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+r);this._arr[n].priority=r,this._decrease(n)},n.prototype._heapify=function(e){var r=this._arr,n=2*e,t=n+1,o=e;n<r.length&&(o=r[n].priority<r[o].priority?n:o,t<r.length&&(o=r[t].priority<r[o].priority?t:o),o!==e&&(this._swap(e,o),this._heapify(o)))},n.prototype._decrease=function(e){for(var r,n=this._arr,t=n[e].priority;0!==e&&(r=e>>1,!(n[r].priority<t));)this._swap(e,r),e=r},n.prototype._swap=function(e,r){var n=this._arr,t=this._keyIndices,o=n[e],i=n[r];n[e]=i,n[r]=o,t[i.key]=e,t[o.key]=r}},{}],21:[function(e,r){function n(e){if(this._size=0,this._keys={},e)for(var r=0,n=e.length;n>r;++r)this.add(e[r])}function t(e){var r,n=Object.keys(e),t=n.length,o=new Array(t);for(r=0;t>r;++r)o[r]=e[n[r]];return o}var o=e("./util");r.exports=n,n.intersect=function(e){if(0===e.length)return new n;for(var r=new n(o.isArray(e[0])?e[0]:e[0].keys()),t=1,i=e.length;i>t;++t)for(var a=r.keys(),d=o.isArray(e[t])?new n(e[t]):e[t],u=0,s=a.length;s>u;++u){var c=a[u];d.has(c)||r.remove(c)}return r},n.union=function(e){for(var r=o.reduce(e,function(e,r){return e+(r.size?r.size():r.length)},0),t=new Array(r),i=0,a=0,d=e.length;d>a;++a)for(var u=e[a],s=o.isArray(u)?u:u.keys(),c=0,h=s.length;h>c;++c)t[i++]=s[c];return new n(t)},n.prototype.size=function(){return this._size},n.prototype.keys=function(){return t(this._keys)},n.prototype.has=function(e){return e in this._keys},n.prototype.add=function(e){return e in this._keys?!1:(this._keys[e]=e,++this._size,!0)},n.prototype.remove=function(e){return e in this._keys?(delete this._keys[e],--this._size,!0):!1}},{"./util":22}],22:[function(e,r,n){n.isArray=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.reduce="function"!=typeof Array.prototype.reduce?function(e,r,n){"use strict";if(null===e||"undefined"==typeof e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw new TypeError(r+" is not a function");var t,o,i=e.length>>>0,a=!1;for(1<arguments.length&&(o=n,a=!0),t=0;i>t;++t)e.hasOwnProperty(t)&&(a?o=r(o,e[t],t,e):(o=e[t],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return o}:function(e,r,n){return e.reduce(r,n)}},{}],23:[function(e,r){r.exports="1.1.3"},{}],24:[function(e,r,n){n.Graph=e("./lib/Graph"),n.Digraph=e("./lib/Digraph"),n.CGraph=e("./lib/CGraph"),n.CDigraph=e("./lib/CDigraph"),e("./lib/graph-converters"),n.alg={isAcyclic:e("./lib/alg/isAcyclic"),components:e("./lib/alg/components"),dijkstra:e("./lib/alg/dijkstra"),dijkstraAll:e("./lib/alg/dijkstraAll"),findCycles:e("./lib/alg/findCycles"),floydWarshall:e("./lib/alg/floydWarshall"),postorder:e("./lib/alg/postorder"),preorder:e("./lib/alg/preorder"),prim:e("./lib/alg/prim"),tarjan:e("./lib/alg/tarjan"),topsort:e("./lib/alg/topsort")},n.converter={json:e("./lib/converter/json.js")};var t=e("./lib/filter");n.filter={all:t.all,nodesFromList:t.nodesFromList},n.version=e("./lib/version")},{"./lib/CDigraph":26,"./lib/CGraph":27,"./lib/Digraph":28,"./lib/Graph":29,"./lib/alg/components":30,"./lib/alg/dijkstra":31,"./lib/alg/dijkstraAll":32,"./lib/alg/findCycles":33,"./lib/alg/floydWarshall":34,"./lib/alg/isAcyclic":35,"./lib/alg/postorder":36,"./lib/alg/preorder":37,"./lib/alg/prim":38,"./lib/alg/tarjan":39,"./lib/alg/topsort":40,"./lib/converter/json.js":42,"./lib/filter":43,"./lib/graph-converters":44,"./lib/version":46}],25:[function(e,r){function n(){this._value=void 0,this._nodes={},this._edges={},this._nextId=0}function t(e,r,n){(e[r]||(e[r]=new i)).add(n)}function o(e,r,n){var t=e[r];t.remove(n),0===t.size()&&delete e[r]}var i=e("cp-data").Set;r.exports=n,n.prototype.order=function(){return Object.keys(this._nodes).length},n.prototype.size=function(){return Object.keys(this._edges).length},n.prototype.graph=function(e){return 0===arguments.length?this._value:void(this._value=e)},n.prototype.hasNode=function(e){return e in this._nodes},n.prototype.node=function(e,r){var n=this._strictGetNode(e);return 1===arguments.length?n.value:void(n.value=r)},n.prototype.nodes=function(){var e=[];return this.eachNode(function(r){e.push(r)}),e},n.prototype.eachNode=function(e){for(var r in this._nodes){var n=this._nodes[r];e(n.id,n.value)}},n.prototype.hasEdge=function(e){return e in this._edges},n.prototype.edge=function(e,r){var n=this._strictGetEdge(e);return 1===arguments.length?n.value:void(n.value=r)},n.prototype.edges=function(){var e=[];return this.eachEdge(function(r){e.push(r)}),e},n.prototype.eachEdge=function(e){for(var r in this._edges){var n=this._edges[r];e(n.id,n.u,n.v,n.value)}},n.prototype.incidentNodes=function(e){var r=this._strictGetEdge(e);return[r.u,r.v]},n.prototype.addNode=function(e,r){if(void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasNode(e))}else if(this.hasNode(e))throw new Error("Graph already has node '"+e+"'");return this._nodes[e]={id:e,value:r},e},n.prototype.delNode=function(e){this._strictGetNode(e),this.incidentEdges(e).forEach(function(e){this.delEdge(e)},this),delete this._nodes[e]},n.prototype._addEdge=function(e,r,n,o,i,a){if(this._strictGetNode(r),this._strictGetNode(n),void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasEdge(e))}else if(this.hasEdge(e))throw new Error("Graph already has edge '"+e+"'");return this._edges[e]={id:e,u:r,v:n,value:o},t(i[n],r,e),t(a[r],n,e),e},n.prototype._delEdge=function(e,r,n){var t=this._strictGetEdge(e);o(r[t.v],t.u,e),o(n[t.u],t.v,e),delete this._edges[e]},n.prototype.copy=function(){var e=new this.constructor;return e.graph(this.graph()),this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(r,n,t,o)}),e._nextId=this._nextId,e},n.prototype.filterNodes=function(e){var r=new this.constructor;return r.graph(this.graph()),this.eachNode(function(n,t){e(n)&&r.addNode(n,t)}),this.eachEdge(function(e,n,t,o){r.hasNode(n)&&r.hasNode(t)&&r.addEdge(e,n,t,o)}),r},n.prototype._strictGetNode=function(e){var r=this._nodes[e];if(void 0===r)throw new Error("Node '"+e+"' is not in graph");return r},n.prototype._strictGetEdge=function(e){var r=this._edges[e];if(void 0===r)throw new Error("Edge '"+e+"' is not in graph");return r}},{"cp-data":19}],26:[function(e,r){var n=e("./Digraph"),t=e("./compoundify"),o=t(n);r.exports=o,o.fromDigraph=function(e){var r=new o,n=e.graph();return void 0!==n&&r.graph(n),e.eachNode(function(e,n){void 0===n?r.addNode(e):r.addNode(e,n)}),e.eachEdge(function(e,n,t,o){void 0===o?r.addEdge(null,n,t):r.addEdge(null,n,t,o)}),r},o.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":28,"./compoundify":41}],27:[function(e,r){var n=e("./Graph"),t=e("./compoundify"),o=t(n);r.exports=o,o.fromGraph=function(e){var r=new o,n=e.graph();return void 0!==n&&r.graph(n),e.eachNode(function(e,n){void 0===n?r.addNode(e):r.addNode(e,n)}),e.eachEdge(function(e,n,t,o){void 0===o?r.addEdge(null,n,t):r.addEdge(null,n,t,o)}),r},o.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":29,"./compoundify":41}],28:[function(e,r){function n(){o.call(this),this._inEdges={},this._outEdges={}}var t=e("./util"),o=e("./BaseGraph"),i=e("cp-data").Set;r.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.isDirected=function(){return!0},n.prototype.successors=function(e){return this._strictGetNode(e),Object.keys(this._outEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.predecessors=function(e){return this._strictGetNode(e),Object.keys(this._inEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.neighbors=function(e){return i.union([this.successors(e),this.predecessors(e)]).keys()},n.prototype.sources=function(){var e=this;return this._filterNodes(function(r){return 0===e.inEdges(r).length})},n.prototype.sinks=function(){var e=this;return this._filterNodes(function(r){return 0===e.outEdges(r).length})},n.prototype.source=function(e){return this._strictGetEdge(e).u},n.prototype.target=function(e){return this._strictGetEdge(e).v},n.prototype.inEdges=function(e,r){this._strictGetNode(e);var n=i.union(t.values(this._inEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(r),n=n.filter(function(e){return this.source(e)===r},this)),n},n.prototype.outEdges=function(e,r){this._strictGetNode(e);var n=i.union(t.values(this._outEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(r),n=n.filter(function(e){return this.target(e)===r},this)),n},n.prototype.incidentEdges=function(e,r){return arguments.length>1?i.union([this.outEdges(e,r),this.outEdges(r,e)]).keys():i.union([this.inEdges(e),this.outEdges(e)]).keys()},n.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,r){return e=o.prototype.addNode.call(this,e,r),this._inEdges[e]={},this._outEdges[e]={},e},n.prototype.delNode=function(e){o.prototype.delNode.call(this,e),delete this._inEdges[e],delete this._outEdges[e]},n.prototype.addEdge=function(e,r,n,t){return o.prototype._addEdge.call(this,e,r,n,t,this._inEdges,this._outEdges)},n.prototype.delEdge=function(e){o.prototype._delEdge.call(this,e,this._inEdges,this._outEdges)},n.prototype._filterNodes=function(e){var r=[];return this.eachNode(function(n){e(n)&&r.push(n)}),r}},{"./BaseGraph":25,"./util":45,"cp-data":19}],29:[function(e,r){function n(){o.call(this),this._incidentEdges={}}var t=e("./util"),o=e("./BaseGraph"),i=e("cp-data").Set;r.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.isDirected=function(){return!1},n.prototype.neighbors=function(e){return this._strictGetNode(e),Object.keys(this._incidentEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.incidentEdges=function(e,r){return this._strictGetNode(e),arguments.length>1?(this._strictGetNode(r),r in this._incidentEdges[e]?this._incidentEdges[e][r].keys():[]):i.union(t.values(this._incidentEdges[e])).keys()
},n.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,r){return e=o.prototype.addNode.call(this,e,r),this._incidentEdges[e]={},e},n.prototype.delNode=function(e){o.prototype.delNode.call(this,e),delete this._incidentEdges[e]},n.prototype.addEdge=function(e,r,n,t){return o.prototype._addEdge.call(this,e,r,n,t,this._incidentEdges,this._incidentEdges)},n.prototype.delEdge=function(e){o.prototype._delEdge.call(this,e,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":25,"./util":45,"cp-data":19}],30:[function(e,r){function n(e){function r(n,t){o.has(n)||(o.add(n),t.push(n),e.neighbors(n).forEach(function(e){r(e,t)}))}var n=[],o=new t;return e.nodes().forEach(function(e){var t=[];r(e,t),t.length>0&&n.push(t)}),n}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],31:[function(e,r){function n(e,r,n,o){function i(r){var t=e.incidentNodes(r),o=t[0]!==u?t[0]:t[1],i=a[o],c=n(r),h=s.distance+c;if(0>c)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+r+" Weight: "+c);h<i.distance&&(i.distance=h,i.predecessor=u,d.decrease(o,h))}var a={},d=new t;n=n||function(){return 1},o=o||(e.isDirected()?function(r){return e.outEdges(r)}:function(r){return e.incidentEdges(r)}),e.eachNode(function(e){var n=e===r?0:Number.POSITIVE_INFINITY;a[e]={distance:n},d.add(e,n)});for(var u,s;d.size()>0&&(u=d.removeMin(),s=a[u],s.distance!==Number.POSITIVE_INFINITY);)o(u).forEach(i);return a}var t=e("cp-data").PriorityQueue;r.exports=n},{"cp-data":19}],32:[function(e,r){function n(e,r,n){var o={};return e.eachNode(function(i){o[i]=t(e,i,r,n)}),o}var t=e("./dijkstra");r.exports=n},{"./dijkstra":31}],33:[function(e,r){function n(e){return t(e).filter(function(e){return e.length>1})}var t=e("./tarjan");r.exports=n},{"./tarjan":39}],34:[function(e,r){function n(e,r,n){var t={},o=e.nodes();return r=r||function(){return 1},n=n||(e.isDirected()?function(r){return e.outEdges(r)}:function(r){return e.incidentEdges(r)}),o.forEach(function(i){t[i]={},t[i][i]={distance:0},o.forEach(function(e){i!==e&&(t[i][e]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(n){var o=e.incidentNodes(n),a=o[0]!==i?o[0]:o[1],d=r(n);d<t[i][a].distance&&(t[i][a]={distance:d,predecessor:i})})}),o.forEach(function(e){var r=t[e];o.forEach(function(n){var i=t[n];o.forEach(function(n){var t=i[e],o=r[n],a=i[n],d=t.distance+o.distance;d<a.distance&&(a.distance=d,a.predecessor=o.predecessor)})})}),t}r.exports=n},{}],35:[function(e,r){function n(e){try{t(e)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}var t=e("./topsort");r.exports=n},{"./topsort":40}],36:[function(e,r){function n(e,r,n){function o(r,t){if(i.has(r))throw new Error("The input graph is not a tree: "+e);i.add(r),e.neighbors(r).forEach(function(e){e!==t&&o(e,r)}),n(r)}var i=new t;if(e.isDirected())throw new Error("This function only works for undirected graphs");o(r)}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],37:[function(e,r){function n(e,r,n){function o(r,t){if(i.has(r))throw new Error("The input graph is not a tree: "+e);i.add(r),n(r),e.neighbors(r).forEach(function(e){e!==t&&o(e,r)})}var i=new t;if(e.isDirected())throw new Error("This function only works for undirected graphs");o(r)}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],38:[function(e,r){function n(e,r){function n(n){var t=e.incidentNodes(n),o=t[0]!==i?t[0]:t[1],a=u.priority(o);if(void 0!==a){var s=r(n);a>s&&(d[o]=i,u.decrease(o,s))}}var i,a=new t,d={},u=new o;if(0===e.order())return a;e.eachNode(function(e){u.add(e,Number.POSITIVE_INFINITY),a.addNode(e)}),u.decrease(e.nodes()[0],0);for(var s=!1;u.size()>0;){if(i=u.removeMin(),i in d)a.addEdge(null,i,d[i]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.incidentEdges(i).forEach(n)}return a}var t=e("../Graph"),o=e("cp-data").PriorityQueue;r.exports=n},{"../Graph":29,"cp-data":19}],39:[function(e,r){function n(e){function r(a){var d=o[a]={onStack:!0,lowlink:n,index:n++};if(t.push(a),e.successors(a).forEach(function(e){e in o?o[e].onStack&&(d.lowlink=Math.min(d.lowlink,o[e].index)):(r(e),d.lowlink=Math.min(d.lowlink,o[e].lowlink))}),d.lowlink===d.index){var u,s=[];do u=t.pop(),o[u].onStack=!1,s.push(u);while(a!==u);i.push(s)}}if(!e.isDirected())throw new Error("tarjan can only be applied to a directed graph. Bad input: "+e);var n=0,t=[],o={},i=[];return e.nodes().forEach(function(e){e in o||r(e)}),i}r.exports=n},{}],40:[function(e,r){function n(e){function r(a){if(a in o)throw new t;a in n||(o[a]=!0,n[a]=!0,e.predecessors(a).forEach(function(e){r(e)}),delete o[a],i.push(a))}if(!e.isDirected())throw new Error("topsort can only be applied to a directed graph. Bad input: "+e);var n={},o={},i=[],a=e.sinks();if(0!==e.order()&&0===a.length)throw new t;return e.sinks().forEach(function(e){r(e)}),i}function t(){}r.exports=n,n.CycleException=t,t.prototype.toString=function(){return"Graph has at least one cycle"}},{}],41:[function(e,r){function n(e){function r(){e.call(this),this._parents={},this._children={},this._children[null]=new t}return r.prototype=new e,r.prototype.constructor=r,r.prototype.parent=function(e,r){if(this._strictGetNode(e),arguments.length<2)return this._parents[e];if(e===r)throw new Error("Cannot make "+e+" a parent of itself");null!==r&&this._strictGetNode(r),this._children[this._parents[e]].remove(e),this._parents[e]=r,this._children[r].add(e)},r.prototype.children=function(e){return null!==e&&this._strictGetNode(e),this._children[e].keys()},r.prototype.addNode=function(r,n){return r=e.prototype.addNode.call(this,r,n),this._parents[r]=null,this._children[r]=new t,this._children[null].add(r),r},r.prototype.delNode=function(r){var n=this.parent(r);return this._children[r].keys().forEach(function(e){this.parent(e,n)},this),this._children[n].remove(r),delete this._parents[r],delete this._children[r],e.prototype.delNode.call(this,r)},r.prototype.copy=function(){var r=e.prototype.copy.call(this);return this.nodes().forEach(function(e){r.parent(e,this.parent(e))},this),r},r.prototype.filterNodes=function(r){function n(e){var r=t.parent(e);return null===r||o.hasNode(r)?(i[e]=r,r):r in i?i[r]:n(r)}var t=this,o=e.prototype.filterNodes.call(this,r),i={};return o.eachNode(function(e){o.parent(e,n(e))}),o},r}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],42:[function(e,r,n){function t(e){return Object.prototype.toString.call(e).slice(8,-1)}var o=e("../Graph"),i=e("../Digraph"),a=e("../CGraph"),d=e("../CDigraph");n.decode=function(e,r,n){if(n=n||i,"Array"!==t(e))throw new Error("nodes is not an Array");if("Array"!==t(r))throw new Error("edges is not an Array");if("string"==typeof n)switch(n){case"graph":n=o;break;case"digraph":n=i;break;case"cgraph":n=a;break;case"cdigraph":n=d;break;default:throw new Error("Unrecognized graph type: "+n)}var u=new n;return e.forEach(function(e){u.addNode(e.id,e.value)}),u.parent&&e.forEach(function(e){e.children&&e.children.forEach(function(r){u.parent(r,e.id)})}),r.forEach(function(e){u.addEdge(e.id,e.u,e.v,e.value)}),u},n.encode=function(e){var r=[],n=[];e.eachNode(function(n,t){var o={id:n,value:t};if(e.children){var i=e.children(n);i.length&&(o.children=i)}r.push(o)}),e.eachEdge(function(e,r,t,o){n.push({id:e,u:r,v:t,value:o})});var t;if(e instanceof d)t="cdigraph";else if(e instanceof a)t="cgraph";else if(e instanceof i)t="digraph";else{if(!(e instanceof o))throw new Error("Couldn't determine type of graph: "+e);t="graph"}return{nodes:r,edges:n,type:t}}},{"../CDigraph":26,"../CGraph":27,"../Digraph":28,"../Graph":29}],43:[function(e,r,n){var t=e("cp-data").Set;n.all=function(){return function(){return!0}},n.nodesFromList=function(e){var r=new t(e);return function(e){return r.has(e)}}},{"cp-data":19}],44:[function(e){var r=e("./Graph"),n=e("./Digraph");r.prototype.toDigraph=r.prototype.asDirected=function(){var e=new n;return this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(null,n,t,o),e.addEdge(null,t,n,o)}),e},n.prototype.toGraph=n.prototype.asUndirected=function(){var e=new r;return this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(r,n,t,o)}),e}},{"./Digraph":28,"./Graph":29}],45:[function(e,r,n){n.values=function(e){var r,n=Object.keys(e),t=n.length,o=new Array(t);for(r=0;t>r;++r)o[r]=e[n[r]];return o}},{}],46:[function(e,r){r.exports="0.7.4"},{}]},{},[1]),joint.layout.DirectedGraph={layout:function(e,r){r=r||{};var n=this._prepareData(e),t=dagre.layout();r.debugLevel&&t.debugLevel(r.debugLevel),r.rankDir&&t.rankDir(r.rankDir),r.rankSep&&t.rankSep(r.rankSep),r.edgeSep&&t.edgeSep(r.edgeSep),r.nodeSep&&t.nodeSep(r.nodeSep);var o=t.run(n);return o.eachNode(function(n,t){if(!t.dummy){var o=e.getCell(n);r.setPosition?r.setPosition(o,t):e.get("cells").get(n).set("position",{x:t.x-t.width/2,y:t.y-t.height/2})}}),r.setLinkVertices&&o.eachEdge(function(n,t,o,i){var a=e.getCell(n);a&&(r.setVertices?r.setVertices(a,i.points):a.set("vertices",i.points))}),{width:o.graph().width,height:o.graph().height}},_prepareData:function(e){var r=new dagre.Digraph;return _.each(e.getElements(),function(e){r.hasNode(e.id)||r.addNode(e.id,{width:e.get("size").width,height:e.get("size").height,rank:e.get("rank")})}),_.each(e.getLinks(),function(e){if(!r.hasEdge(e.id)){var n=e.get("source").id,t=e.get("target").id;r.addEdge(e.id,n,t,{minLen:e.get("minLen")||1})}}),r}};